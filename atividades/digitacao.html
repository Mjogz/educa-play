<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Treinador de Digita√ß√£o - Coordena√ß√£o</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f4fdf6; color:#333; }
header { background:#4CAF50; color:white; padding:20px; text-align:center; }
main { max-width:800px; margin:30px auto; background:white; padding:30px; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.1); text-align:center; }
h2 { color:#388e3c; margin-bottom:20px; }
#temporizador { font-size:1.3em; margin-bottom:15px; font-weight:bold; color:#4CAF50; }
#textoExemplo { background:#e8f5e9; padding:15px; border:1px solid #c8e6c9; border-radius:5px; font-size:1.2em; margin-bottom:20px; user-select:none; }
textarea { width:100%; height:120px; font-size:1.1em; padding:10px; border-radius:5px; border:2px solid #ccc; resize:vertical; }
textarea.correto { border-color:#4CAF50; background:#e6ffe6; }
#resultado { margin-top:15px; font-size:1.1em; color:#222; }
.botao { display:inline-block; margin:15px 5px 0 5px; padding:10px 20px; font-size:1em; font-weight:bold; cursor:pointer; border:none; border-radius:6px; transition:background 0.3s; }
.botao-verde { background:#4CAF50; color:white; }
.botao-verde:hover { background:#45a049; }
.botao-amarelo { background:#FFD700; color:black; }
.botao-amarelo:hover { background:#e6c200; }
</style>
</head>
<body>

<header>
<h1>Treinador de Digita√ß√£o</h1>
<p>Coordena√ß√£o de Teclado - Maria Julia</p>
</header>

<main>
<h2>Pratique sua digita√ß√£o</h2>

<div id="temporizador">Tempo: 0.00 segundos</div>

<div id="textoExemplo">O c√£o L√©o tem uma bola. Ele joga a bola no ch√£o. A bola rola, rola, rola! L√©o corre atr√°s da bola. Que feliz est√° o L√©o!</div>

<textarea id="caixaDigitacao" placeholder="Comece a digitar aqui..." autofocus></textarea>

<div id="resultado"></div>

<div style="text-align:center;">
<button id="reiniciarBtn" class="botao botao-verde">Reiniciar</button>
<button onclick="window.location.href='../index.html'" class="botao botao-amarelo">Voltar</button>
</div>
</main>

<script>
const textoAlvo = document.getElementById("textoExemplo").textContent.trim();
const caixa = document.getElementById("caixaDigitacao");
const resultado = document.getElementById("resultado");
const reiniciarBtn = document.getElementById("reiniciarBtn");
const temporizador = document.getElementById("temporizador");

let inicioTempo = null;
let intervaloId = null;
let terminou = false;
let teclasDigitadas = 0;

function formatarTempo(ms){ return (ms/1000).toFixed(2); }
function atualizarTemporizador(){
  if(!inicioTempo) return;
  const agora = new Date();
  const tempoDecorrido = agora - inicioTempo;
  temporizador.textContent = `Tempo: ${formatarTempo(tempoDecorrido)} segundos`;
}
function iniciarTemporizador(){
  if(intervaloId) return;
  intervaloId = setInterval(atualizarTemporizador, 100);
}
function pararTemporizador(){
  clearInterval(intervaloId);
  intervaloId = null;
}
function reset(){
  caixa.value = "";
  caixa.classList.remove("correto");
  resultado.textContent = "";
  temporizador.textContent = "Tempo: 0.00 segundos";
  inicioTempo = null;
  terminou = false;
  teclasDigitadas = 0;
  caixa.disabled = false;
  caixa.focus();
  pararTemporizador();
}
reiniciarBtn.addEventListener("click", reset);

caixa.addEventListener("input", ()=>{
  if(terminou) return;

  if(!inicioTempo){
    inicioTempo = new Date();
    iniciarTemporizador();
  }

  teclasDigitadas++;

  // marca visual de digita√ß√£o
  if(caixa.value.length > 0){
    caixa.classList.add("correto");
  }else{
    caixa.classList.remove("correto");
  }

  // se digitou o tamanho do texto alvo, termina
  if(caixa.value.length >= textoAlvo.length){
    terminou = true;
    caixa.disabled = true;
    pararTemporizador();
    const fimTempo = new Date();
    let faltou = textoAlvo.length - caixa.value.length;
    let msgFaltou = "";
    if(faltou > 0){
      msgFaltou = `<br>‚ùó Faltaram <strong>${faltou}</strong> caracteres para completar o texto.`;
    } else if(faltou < 0){
      msgFaltou = `<br>‚ùó Voc√™ digitou <strong>${Math.abs(faltou)}</strong> caracteres a mais que o texto.`;
    }

    resultado.innerHTML = `‚úÖ <strong>Voc√™ terminou a digita√ß√£o!</strong><br>
    ‚è±Ô∏è Tempo final: <strong>${formatarTempo(fimTempo - inicioTempo)}</strong> segundos<br>
    üñêÔ∏è Teclas digitadas: <strong>${teclasDigitadas}</strong>${msgFaltou}`;
  }
});

reset();
</script>

</body>
</html>
