<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <title>Quiz Bullying - Maria Julia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Estilo Embutido -->
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4fdf6;
      color: #333;
    }

    header {
      background-color: #4CAF50;
      color: white;
      padding: 20px;
      text-align: center;
    }

    #main-content {
      max-width: 800px;
      margin: 30px auto;
      background-color: #fff;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    h2 {
      color: #388e3c;
    }

    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
    }

    input,
    button {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      margin-bottom: 16px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    .option-btn {
      display: block;
      margin: 10px 0;
      padding: 12px;
      background-color: #e8f5e9;
      border: 1px solid #c8e6c9;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s;
      font-size: 16px;
    }

    .option-btn:hover {
      background-color: #c8e6c9;
    }

    .option-btn.correct {
      background-color: #4CAF50 !important;
      color: white;
      font-weight: bold;
    }

    .option-btn.incorrect {
      background-color: #f44336 !important;
      color: white;
      font-weight: bold;
    }

    .option-btn:disabled {
      cursor: not-allowed;
      opacity: 0.8;
    }

    .botao-amarelo {
      background-color: #FFD700;
      color: #000;
      border: none;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
    }

    .botao-amarelo:hover {
      background-color: #e6c200;
    }

    .botao-verde {
      background-color: #4CAF50;
      color: white;
      border: none;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
    }

    .botao-verde:hover {
      background-color: #45a049;
    }

    #score {
      font-size: 1.3em;
      font-weight: bold;
      margin-top: 20px;
      text-align: center;
      color: #388e3c;
    }

    #stars {
      text-align: center;
      font-size: 1.6em;
      color: #4CAF50;
      margin-bottom: 15px;
    }

    @media (max-width: 600px) {
      #main-content {
        margin: 15px;
        padding: 20px;
      }
    }
  </style>

  <!-- Excel -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.5/xlsx.full.min.js"></script>
</head>

<body>

  <!-- Cabeçalho -->
  <header>
    <h1>Quiz - Bullying</h1>
  </header>

  <!-- Conteúdo -->
  <div id="main-content">

    <!-- Formulário -->
    <div id="form-container">
      <h2>Informações do Aluno</h2>
      <form id="student-form">
        <label for="school-name">Nome da Escola:</label>
        <input type="text" id="school-name" required>

        <label for="teacher-name">Nome da Professora:</label>
        <input type="text" id="teacher-name" required>

        <label for="student-name">Nome do Aluno:</label>
        <input type="text" id="student-name" required>

        <label for="student-class">Sala do Aluno:</label>
        <input type="text" id="student-class" required>

        <button type="submit" class="botao-verde">Iniciar Quiz</button>
      <button type="button" onclick="window.location.href='../index.html'" class="botao-amarelo">Voltar ao Menu</button>
      </form>
    </div>

    <!-- Quiz -->
    <div id="quiz-container" style="display: none;">
      <h2 id="quiz-title">Quiz: </h2>

      <!-- Aqui está a pontuação em estrelas -->
      <div id="stars">⭐ 0</div>

      <p id="question"></p>
      <div id="options"></div>
      <button id="next-btn" class="botao-verde" style="display: none;">Próxima</button>
      <p id="score"></p>
      <br><button type="button" onclick="window.location.href='../index.html'" class="botao-amarelo">Voltar ao Menu</button>
    </div>

  </div>

  <!-- Script -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const quizzes = {
        bullying: [
          {
            pergunta: "O que é bullying?",
            opcoes: ["Brincadeira saudável", "Machucar ou zombar de alguém repetidamente", "Estudar em grupo"],
            resposta: 1
          },
          {
            pergunta: "Se você ver alguém sofrendo bullying, o que deve fazer?",
            opcoes: ["Ignorar", "Contar para um adulto ou professor", "Rir junto"],
            resposta: 1
          },
          {
            pergunta: "Qual dessas atitudes é RESPEITO?",
            opcoes: ["Chamar por apelidos ofensivos", "Ajudar quem precisa", "Excluir das brincadeiras"],
            resposta: 1
          },
          {
            pergunta: "Como você pode ser um bom colega?",
            opcoes: ["Empurrando os outros", "Dividindo os brinquedos", "Fazendo careta para os amigos"],
            resposta: 1
          },
          {
            pergunta: "Quando alguém está triste, o que você pode fazer?",
            opcoes: ["Fazer piada com ele", "Chamar outros para rir dele", "Perguntar se ele precisa de ajuda"],
            resposta: 2
          }
        ]
      };

      let currentQuiz = [];
      let currentQuestion = 0;
      let score = 0;
      let studentData = {};

      const startBtn = document.querySelector("#student-form button[type='submit']");
      const quizContainer = document.getElementById("quiz-container");
      const menuContainer = document.getElementById("form-container");
      const questionEl = document.getElementById("question");
      const optionsEl = document.getElementById("options");
      const nextBtn = document.getElementById("next-btn");
      const scoreEl = document.getElementById("score");
      const quizTitle = document.getElementById("quiz-title");
      const starsEl = document.getElementById("stars");

      startBtn.onclick = (e) => {
        e.preventDefault();
        const schoolName = document.getElementById("school-name").value;
        const teacherName = document.getElementById("teacher-name").value;
        const studentName = document.getElementById("student-name").value;
        const studentClass = document.getElementById("student-class").value;

        if (!schoolName || !teacherName || !studentName || !studentClass) {
          alert("Por favor, preencha todos os campos!");
          return;
        }

        studentData = {
          Escola: schoolName,
          Professora: teacherName,
          Aluno: studentName,
          Sala: studentClass,
          Pontuação: 0
        };

        currentQuiz = quizzes["bullying"];
        quizTitle.textContent = "Quiz: Bullying";
        currentQuestion = 0;
        score = 0;

        menuContainer.style.display = "none";
        quizContainer.style.display = "block";
        showQuestion();
      };

      function showQuestion() {
        const q = currentQuiz[currentQuestion];
        questionEl.textContent = q.pergunta;
        optionsEl.innerHTML = "";
        nextBtn.style.display = "none";

        // Atualiza a pontuação em estrelas
        starsEl.textContent = `⭐ ${score}`;

        q.opcoes.forEach((opcao, index) => {
          const btn = document.createElement("button");
          btn.textContent = opcao;
          btn.classList.add("option-btn");
          btn.onclick = () => selectAnswer(index);
          optionsEl.appendChild(btn);
        });
      }

      function selectAnswer(index) {
        const q = currentQuiz[currentQuestion];
        const buttons = document.querySelectorAll(".option-btn");

        buttons.forEach((btn, i) => {
          btn.disabled = true;
          if (i === q.resposta) {
            btn.classList.add("correct");
          } else if (i === index) {
            btn.classList.add("incorrect");
          }
        });

        if (index === q.resposta) {
          score++;
          starsEl.textContent = `⭐ ${score}`;
        }

        nextBtn.style.display = "block";
      }

      nextBtn.onclick = () => {
        currentQuestion++;
        if (currentQuestion < currentQuiz.length) {
          showQuestion();
        } else {
          showScore();
        }
      };

      function showScore() {
        studentData.Pontuação = score;

        generateExcel(studentData);

        questionEl.textContent = `Você acertou ${score} de ${currentQuiz.length} perguntas!`;
        optionsEl.innerHTML = "";
        nextBtn.style.display = "none";
        starsEl.textContent = `⭐ ${score}`;
        scoreEl.textContent = "";
        document.querySelector("#quiz-container button.botao-amarelo").style.display = "block";
      }

      function generateExcel(data) {
        const ws = XLSX.utils.json_to_sheet([data]);
        const wb = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(wb, ws, "Resultados");
        XLSX.writeFile(wb, "resultado_quiz_bullying.xlsx");
      }
    });
  </script>
</body>

</html>