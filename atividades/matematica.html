<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Quiz de Matemática - 1º Ano</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { font-family: Arial, sans-serif; background: #f4fdf6; margin:0; padding:0; color:#333; }
  header { background: #4CAF50; color: white; padding: 20px; text-align: center; }
  main { max-width: 800px; margin: 30px auto; background: white; padding: 30px; border-radius: 10px; box-shadow:0 4px 12px rgba(0,0,0,0.1); }
  #stars { text-align:center; font-size:1.5em; color:#2a7a2a; margin-bottom:15px; }
  #question { text-align:center; font-size:1.3em; margin-bottom:20px; }
  .options { display:flex; flex-direction:column; gap:12px; align-items:center; margin-bottom:20px; }
  .option-btn { padding:12px 25px; font-size:1.1em; border:none; border-radius:6px; cursor:pointer; background:#d4edda; color:#155715; font-weight:bold; transition:background 0.3s; width:200px; }
  .option-btn:hover { background:#c3e6cb; }
  .option-btn.correct { background:#28a745; color:white; }
  .option-btn.incorrect { background:#f44336; color:white; }
  #next-btn { display:none; padding:12px 30px; background:#4CAF50; color:white; border:none; border-radius:6px; cursor:pointer; font-weight:bold; font-size:1.1em; margin:0 auto; display:block; }
  #final-message { text-align:center; font-size:1.3em; margin-top:20px; font-weight:bold; color:#155715; }
  .botao-amarelo { background:#FFD700; color:black; border:none; font-weight:bold; border-radius:6px; cursor:pointer; padding:12px 30px; display:block; margin:20px auto 0 auto; transition:background 0.3s; text-align:center; }
  .botao-amarelo:hover { background:#e6c200; }
</style>
</head>
<body>

<header>
  <h1>Quiz de Matemática</h1>
</header>

<main>
  <div id="stars">⭐ 0</div>
  <div id="question">Carregando pergunta...</div>
  <div class="options" id="options"></div>
  <button id="next-btn">Próxima</button>
  <div id="final-message"></div>
  <button type="button" onclick="window.location.href='../index.html'" class="botao-amarelo" id="back-btn" style="display:none;">Voltar ao Menu</button>
</main>

<script>
const questionEl = document.getElementById("question");
const optionsEl = document.getElementById("options");
const nextBtn = document.getElementById("next-btn");
const starsEl = document.getElementById("stars");
const finalMessageEl = document.getElementById("final-message");
const backBtn = document.getElementById("back-btn");

let currentQuestion = 0;
let score = 0;

// Gera perguntas de + e - simples sem resultados negativos
function gerarQuiz(numQuestoes=5) {
  const quiz = [];
  for(let i=0;i<numQuestoes;i++){
    let a = Math.floor(Math.random()*10)+1;
    let b = Math.floor(Math.random()*10)+1;
    let operacao = Math.random()<0.5 ? "+" : "-";
    // Garantir subtração não negativa
    if(operacao === "-" && b > a){
      [a,b] = [b,a]; // inverte para resultado positivo
    }
    let resultado = operacao === "+" ? a+b : a-b;
    // opções aleatórias
    let opcoes = [resultado];
    while(opcoes.length<4){
      let rand = Math.floor(Math.random()*20);
      if(!opcoes.includes(rand)) opcoes.push(rand);
    }
    opcoes.sort(()=>Math.random()-0.5);
    quiz.push({
      text:`${a} ${operacao} ${b} = ?`,
      options: opcoes.map(n=>n.toString()),
      correct: resultado.toString()
    });
  }
  return quiz;
}

const quiz = gerarQuiz(7);

function showQuestion(){
  const q = quiz[currentQuestion];
  questionEl.textContent = q.text;
  optionsEl.innerHTML = "";
  nextBtn.style.display="none";

  q.options.forEach(opcao=>{
    const btn = document.createElement("button");
    btn.textContent = opcao;
    btn.classList.add("option-btn");
    btn.onclick = ()=>selectAnswer(btn, opcao, q.correct);
    optionsEl.appendChild(btn);
  });
}

function selectAnswer(button, selected, correct){
  const buttons = document.querySelectorAll(".option-btn");
  buttons.forEach(btn=>btn.disabled=true);

  if(selected===correct){
    button.classList.add("correct");
    score++;
    starsEl.textContent = `⭐ ${score}`;
  } else {
    button.classList.add("incorrect");
    buttons.forEach(btn=>{
      if(btn.textContent===correct) btn.classList.add("correct");
    });
  }

  nextBtn.style.display="block";
}

nextBtn.onclick = ()=>{
  currentQuestion++;
  if(currentQuestion<quiz.length){
    showQuestion();
  } else {
    showFinalMessage();
  }
};

function showFinalMessage(){
  questionEl.style.display="none";
  optionsEl.style.display="none";
  nextBtn.style.display="none";
  starsEl.style.fontSize="2em";
  finalMessageEl.innerHTML = `✨ Parabéns! Você terminou o quiz!<br>Acertos: <strong>${score}</strong> de <strong>${quiz.length}</strong> ⭐`;
  backBtn.style.display="block";
}

showQuestion();
</script>

</body>
</html>
