<!DOCTYPE html>
<html lang="pt-BR">

<head>
<meta charset="UTF-8">
<title>Forma√ß√£o de Palavras - EducaPlay</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
    font-family: Arial, sans-serif;
    background: #f4fdf6;
    margin: 0;
}
header {
    background: #4CAF50;
    color: white;
    padding: 20px;
    text-align: center;
    box-shadow: 0 3px 6px rgba(0,0,0,0.1);
}
main {
    max-width: 800px;
    margin: 30px auto;
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.1);
    text-align: center;
}
#stars {
    font-size: 1.6em;
    margin-bottom: 15px;
    color: #2a7a2a;
    font-weight: bold;
}
p {
    text-align: center;
    margin: 8px 0 18px;
    font-size: 1.1em;
}
.container {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 14px;
}
.letter {
    background: #d4edda;
    padding: 14px 18px;
    border-radius: 8px;
    font-size: 1.3em;
    cursor: grab;
    user-select: none;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
    transition: transform 0.1s;
}
.letter:active { transform: scale(1.1); }
#word-zone {
    min-height: 60px;
    border: 2px dashed #4CAF50;
    padding: 12px;
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 18px;
}
.btn {
    background: #4CAF50;
    color: white;
    padding: 12px 28px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1.1em;
    margin: 6px;
    transition: background 0.3s;
}
.btn:hover { background: #45a049; }
.botao-amarelo {
    background: #FFD700;
    color: #000;
    font-weight: bold;
    padding: 12px 28px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    margin: 6px;
    font-size: 1.1em;
    transition: background 0.3s;
}
.botao-amarelo:hover { background: #e6c200; }
.botao-azul {
    background: #005aa3;
    color: white;
    font-weight: bold;
    padding: 12px 28px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    margin: 6px;
    font-size: 1.1em;
    transition: background 0.3s;
}
.botao-azul:hover { background: #004080; }
#final-message {
    margin-top: 18px;
    font-size: 1.2em;
    font-weight: bold;
    color: #155715;
}
.image-area {
    text-align: center;
    margin-bottom: 18px;
}
.image-area img {
    width: 200px;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
@media (max-width:600px){
    .letter { padding: 12px 14px; font-size: 1.1em; }
    .btn, .botao-amarelo, .botao-azul { padding: 10px 20px; font-size: 1em; }
}
</style>
</head>

<body>
<header>
    <h1>Forma√ß√£o de Palavras</h1>
</header>

<main>
<div id="stars">‚≠ê 0</div>
<p>Arraste as letras para formar a palavra correta:</p>

<div class="image-area">
    <img id="word-image" src="" alt="Imagem da palavra" />
</div>

<div class="container" id="letters"></div>
<div id="word-zone" aria-label="Espa√ßo para formar palavra"></div>

<!-- Bot√µes centralizados e organizados -->
<div style="text-align:center;">
    <button class="btn" onclick="checkWord()">Verificar</button>
    <button class="botao-azul" id="nextBtn" style="display:none;" onclick="nextWord()">Pr√≥xima</button>
    <button class="btn" onclick="clearZone()">Limpar</button>
    <button type="button" onclick="window.location.href='../index.html'" class="botao-amarelo" id="backBtn">Voltar ao Menu</button>
</div>

<div id="final-message"></div>
</main>

<script>
const starsEl = document.getElementById("stars");
const lettersEl = document.getElementById("letters");
const wordZone = document.getElementById("word-zone");
const finalMessage = document.getElementById("final-message");
const nextBtn = document.getElementById("nextBtn");
const backBtn = document.getElementById("backBtn");
const imageEl = document.getElementById("word-image");

let score = 0;
let currentIndex = 0;

const exercises = [
    { word: "GATO", image: "../img/gato.png" },
    { word: "RATO", image: "../img/rato.png" },
    { word: "SAPO", image: "../img/sapo.png" },
    { word: "PATO", image: "../img/pato.png" },
    { word: "VACA", image: "../img/vaca.png" },
    { word: "CASA", image: "../img/casa.png" },
    { word: "ELEFANTE", image: "../img/elefante.png" },
    { word: "MACACO", image: "../img/macaco.png" }
];

function uid(prefix = "") { return prefix + Math.random().toString(36).slice(2, 9); }

function loadWord() {
    lettersEl.innerHTML = "";
    wordZone.innerHTML = "";
    finalMessage.textContent = "";
    nextBtn.style.display = "none";

    const { word, image } = exercises[currentIndex];
    imageEl.src = image;
    imageEl.alt = "Imagem da palavra " + word;

    const lettersArr = word.split("").map((ch,i)=>({ch,id:`${ch}-${i}-${uid()}`}));
    lettersArr.sort(()=>Math.random()-0.5);

    lettersArr.forEach(item=>{
        const div=document.createElement("div");
        div.textContent=item.ch;
        div.className="letter";
        div.id=item.id;
        div.draggable=true;
        div.addEventListener("dragstart",(e)=>{
            e.dataTransfer.setData("text/plain",item.id);
            setTimeout(()=>div.style.opacity="0.5",0);
        });
        div.addEventListener("dragend",()=>{div.style.opacity="1";});
        lettersEl.appendChild(div);
    });
}

wordZone.addEventListener("dragover",e=>e.preventDefault());
wordZone.addEventListener("drop",e=>{
    e.preventDefault();
    const id = e.dataTransfer.getData("text/plain");
    const dragged = document.getElementById(id);
    if(dragged && dragged.parentElement!==wordZone){ wordZone.appendChild(dragged); }
});

wordZone.addEventListener("click",e=>{
    if(e.target && e.target.classList.contains("letter")){
        lettersEl.appendChild(e.target);
    }
});

function checkWord(){
    const formed = Array.from(wordZone.children).map(l=>l.textContent).join("");
    const { word } = exercises[currentIndex];
    if(!formed){
        finalMessage.textContent="Voc√™ precisa colocar as letras no espa√ßo primeiro.";
        return;
    }
    if(formed===word){
        score++;
        starsEl.textContent=`‚≠ê ${score}`;
        finalMessage.textContent="Parab√©ns! Palavra correta üéâ";
        nextBtn.style.display="inline-block";
    }else{
        finalMessage.textContent="Ops! Est√° incorreta. Limpe para tentar novamente.";
    }
}

function nextWord(){
    currentIndex++;
    if(currentIndex<exercises.length){
        loadWord();
    }else{
        showFinalMessage();
    }
}

function clearZone(){
    const elems = Array.from(wordZone.children);
    elems.forEach(el=>lettersEl.appendChild(el));
    finalMessage.textContent="";
    nextBtn.style.display="none";
}

function showFinalMessage(){
    wordZone.style.display="none";
    imageEl.style.display="none";
    nextBtn.style.display="none";
    finalMessage.innerHTML=`‚ú® Voc√™ concluiu todas as palavras!<br>Acertos: <strong>${score}</strong> de <strong>${exercises.length}</strong> ‚≠ê`;
    backBtn.style.display="inline-block";
}

loadWord();
</script>
</body>
</html>
